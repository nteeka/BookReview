@model PagedList.IPagedList<KK_BookStore.ThongBao>
@using PagedList.Mvc;
@{
    ViewBag.Title = "danhSachThongBao";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<title>Notify Page</title>
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" />
<link href="~/Content/ThongBao/danhSachThongBao.css" rel="stylesheet" />
<div class="container" style="margin-top:50px">
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-body bg-primary text-white mailbox-widget pb-0">
                    <h2 class="text-white pb-3">Your Mailbox</h2>
                    <ul class="nav nav-tabs custom-tab border-bottom-0 mt-4" id="myTab" role="tablist">
                        <li class="nav-item">
                            <a class="nav-link active" id="inbox-tab" data-toggle="tab" aria-controls="inbox" href="#inbox" role="tab" aria-selected="true">
                                <span class="d-block d-md-none"><i class="ti-email"></i></span>
                                <span class="d-none d-md-block"> ALL</span>
                            </a>
                        </li>
                        @*<li class="nav-item">
                            <a class="nav-link" id="sent-tab" data-toggle="tab" aria-controls="sent" href="#sent" role="tab" aria-selected="false">
                                <span class="d-block d-md-none"><i class="ti-export"></i></span>
                                <span class="d-none d-md-block">READ</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="spam-tab" data-toggle="tab" aria-controls="spam" href="#spam" role="tab" aria-selected="false">
                                <span class="d-block d-md-none"><i class="ti-panel"></i></span>
                                <span class="d-none d-md-block">UNREAD</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" id="delete-tab" data-toggle="tab" aria-controls="delete" href="#delete" role="tab" aria-selected="false">
                                <span class="d-block d-md-none"><i class="ti-trash"></i></span>
                                <span class="d-none d-md-block">DELETED</span>
                            </a>
                        </li>*@
                    </ul>
                </div>
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade active show" id="inbox" aria-labelledby="inbox-tab" role="tabpanel">
                        <div>
                            
                            <!-- Mail list-->
                            <div class="table-responsive">
                                <table class="table email-table no-wrap table-hover v-middle mb-0 font-14">
                                    <tbody>
                                        <!-- row -->
                                        <tr>
                                            <td></td>
                                            <td>From</td>
                                            @*<td>Name Post</td>*@
                                            @*<td>Status</td>*@
                                            @*<td>Kind</td>*@
                                            <td>Message</td>
                                            <td>Date</td>
                                            <td>Action</td>

                                        </tr>
                                        @foreach (var item in Model)
                                        {
                                            if (item.TrangThai == 0)
                                            {
                                                <tr style="background-color:lightblue" class="">
                                                    <!-- label -->
                                                    @if (item.MaBaiViet != 3002)
                                                    {
                                                        <td class="pl-3"><a href="@Url.Action("Detail","Review",new {@id = item.MaBaiViet})" title="xem bài viết" class="fa fa-eye"></a></td>

                                                    }
                                                    else
                                                    {
                                                        <td></td>


                                                    }
                                                    <!-- star -->
                                                    <td>@item.BaiViet.TaiKhoan</td>
                                                    <!-- User -->
                                                    <!--<td>
        <span class="mb-0 text-muted font-light">@item.BaiViet.TenBaiViet</span>
    </td>-->
                                                    <!-- Message -->
                                                    @*<td>
            @if (@item.BaiViet.TrangThai == -1)
            {
                <span style="background-color:yellow" class="badge badge-pill text-dark font-medium badge-danger mr-2">Waiting</span>
            }
            else
            {
                if (@item.BaiViet.TrangThai == 1)
                {
                    <span class="badge badge-pill text-success font-medium badge-danger mr-2">Public</span>

                }
                else
                {
                    <span class="badge badge-pill text-red font-medium badge-danger mr-2">Private</span>

                }
            }

        </td>*@
                                                    @*<td>
            <a class="link" href="javascript: void(0)">
                <span class="badge badge-pill text-dark font-medium badge-danger mr-2">Review</span>
            </a>
        </td>*@
                                                    <td><span class="font-light text-dark">@item.NoiDung</span></td>

                                                    <!-- Time -->
                                                    <td class="text-muted font-light">@item.NgayTao.Value.ToString("dd/MM/yyyy")</td>
                                                    <!-- Attachment -->
                                                    <td>
                                                        <ul>
                                                            <li>
                                                                <a href="@Url.Action("danhDauDaDoc", "Admin", new { @id = item.MaThongBao,@strURL = Request.Url.ToString() })" class="fa fa-check text-muted">Đánh dấu đã đọc</a>

                                                            </li>

                                                            @*<li>

                    <a href="@Url.Action("Detail", "Review", new { @id = item.MaBaiViet })" class="fa fa-eye text-muted">See post</a>

                </li>*@
                                                        </ul>

                                                    </td>
                                                </tr>
                                            }
                                            else
                                            {
                                    <tr class="">
                                        @if (item.MaBaiViet != 3002)
                                        {
                                            <td class="pl-3"><a href="@Url.Action("Detail","Review",new {@id = item.MaBaiViet})" title="xem bài viết" class="fa fa-eye"></a></td>

                                        }
                                        else
                                        {
                                            <td></td>


                                        }
                                        <td>@item.BaiViet.TaiKhoan</td>

                                        <td><span class="font-light text-dark">@item.NoiDung</span></td>

                                        <!-- Time -->
                                        <td class="text-muted font-light">@item.NgayTao.Value.ToString("dd/MM/yyyy")</td>
                                        <!-- Attachment -->
                                        <td>
                                            <ul>
                                                <li>
                                                    <a href="@Url.Action("danhDauChuaDoc", "Admin", new { @id = item.MaThongBao,@strURL = Request.Url.ToString() })" class="fa fa-check text-muted">Đánh dấu chưa đọc</a>

                                                </li>

                                                <li>
                                                    @*<a href="@Url.Action("Detail", "Review", new { @id = item.MaBaiViet })" class="fa fa-eye text-muted">See post</a>*@

                                                </li>
                                            </ul>

                                        </td>
                                    </tr>
                                            }

                                        }


                                    </tbody>
                                </table>
                                <div>
                                    Trang @(Model.PageCount < Model.PageNumber ? 0 : Model.PageNumber) /
                                    @Model.PageCount
                                </div>
                                <div class="MenuTrang">
                                    @Html.PagedListPager(Model, page => Url.Action("danhSachThongBao", new
                               {
                                   page = page,
                                   name = Model.First().TaiKhoan
                               }))
                                </div>

                                <script>
                                    // Get all rows in the table
                                    const tableRows = document.querySelectorAll('#myTable tbody tr');

                                    // Add a click event listener to each row
                                    tableRows.forEach(row => {
                                        row.addEventListener('click', () => {
                                            // Get the value of the 'data-href' attribute
                                            const link = row.getAttribute('data-href');

                                            // Navigate to the link
                                            window.location.href = link;
                                        });
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                    @*Read*@
                    <!--<div class="tab-pane fade" id="sent" aria-labelledby="sent-tab" role="tabpanel">
                        
                    </div>-->
                    @*unRead*@
                    <!--<div class="tab-pane fade" id="spam" aria-labelledby="spam-tab" role="tabpanel">
                        <div class="row p-3 text-dark">
                            <div class="col-md-6">
                                <h3 class="font-light">Come on you have a lot message</h3>
                                <h4 class="font-light">you can use it with the small code</h4>
                            </div>
                            <div class="col-md-6 text-right">
                                <p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a.</p>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="delete" aria-labelledby="delete-tab" role="tabpanel">
                        <div class="row p-3 text-dark">
                            <div class="col-md-6">
                                <h3 class="font-light">Just do Settings</h3>
                                <h4 class="font-light">you can use it with the small code</h4>
                            </div>
                            <div class="col-md-6 text-right">
                                <p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a.</p>
                            </div>
                        </div>
                    </div>-->
                </div>
            </div>
        </div>
    </div>
</div>
<style>
    .MenuTrang li {
        display: inline;
    }
</style>
<style type="text/css">
    #mau-nut a {
        clear: both;
        background-color: orange;
        color: snow;
    }

        #mau-nut a:hover {
            background-color: darkcyan;
            color: snow;
        }
</style>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    $(document).ready(function () {
        var maxLength = 100;
        $(".show-read-more").each(function () {
            var myStr = $(this).text();
            if ($.trim(myStr).length > maxLength) {
                var newStr = myStr.substring(0, maxLength);
                var removedStr = myStr.substring(maxLength, $.trim(myStr).length);
                $(this).empty().html(newStr);

                $(this).append(' <a href="javascript:void(0);" class="read-more">đọc tiếp...</a>');

                $(this).append('<span class="more-text">' + removedStr +
                    '</span>');
            }
        });
        $(".read-more").click(function () {
            $(this).siblings(".more-text").contents().unwrap(); $(this).remove();
        });
    });
</script>
<style>
    .show-read-more .more-text {
        display: none;
    }
</style>

